<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
    <title>用户点位渲染</title>
    <style>
        #get{z-index: 100;position: absolute;top:5%;left:5%}
    </style>
</head>
<body style="height: 100%; margin: 0">
<button id="get">读取用户数据</button>
<div id="container" style="height: 100%">
</div>
<script src="js/jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="js/echarts.js"></script>
<script type="text/javascript" src="js/echarts-gl.js"></script>
<script src='js/mapbox-gl.js'></script>
<script type="text/javascript">
    //mapbox地图许可，需要自己注册一个mapbox账户
    mapboxgl.accessToken = 'pk.eyJ1IjoieXlhbmcxOTkzIiwiYSI6ImNqOTl4ZXVzZTBxeDEycXBhNXlsa2F3NWcifQ.QFC0tXCO4wYOvX6IoKSB4g';
    //初始化一个echarts实例
    var myChart = echarts.init(document.getElementById('container'));
    //点位示例数据 【这里需要从数据库读取】
    var testdata = [
        [114.430941000000000,38.057633860000003],[114.431135000000000,38.057644109999998],[114.431331000000000,38.057646239999997],[114.431374000000010,38.057647719999999],[114.431639000000000,38.057647240000001],[114.431873000000000,38.057650080000002],[114.432064000000000,38.057652410000003],[114.432299000000000,38.057655269999998],[114.432473000000000,38.057657399999997],[114.432512000000000,38.057655810000000],[114.432702000000010,38.057667889999998],[114.432706000000000,38.057670060000000],[114.432897999999990,38.057665470000003],[114.433075000000000,38.057667039999998],[114.433260000000000,38.057668669999998],[114.433458000000000,38.057670420000001],[114.433652000000000,38.057672130000000],[114.433502000000000,38.057671780000000],[114.433601000000000,38.057666320000003],[114.433797000000000,38.057678299999999],[114.434005000000000,38.057679589999999],[114.434192999999990,38.057680750000003],[114.434285000000000,38.057683460000000],[114.434482000000000,38.057670469999998],[114.434718000000000,38.057671669999998],[114.434921000000000,38.057672689999997],[114.435120000000000,38.057675260000003],[114.435336000000010,38.057801589999997],[114.435543000000000,38.057919380000001],[114.435591000000000,38.057993869999997],[114.435807999999990,38.058107530000001],[114.435982999999990,38.058209349999998],[114.436165000000000,38.058315890000003],[114.436173000000000,38.058324450000001],[114.436362000000000,38.058498239999999],[114.436567999999990,38.058676009999999],[114.436749000000010,38.058811550000001],[114.436832999999990,38.058791370000002],[114.436967999999990,38.058744810000000],[114.437140000000000,38.058448790000000],[114.437185000000000,38.058366399999997],[114.437219000000000,38.058158339999999],[114.437111000000000,38.057920230000001],[114.437065000000000,38.057744499999998],[114.436931000000000,38.057540729999999],[114.437017999999990,38.057475040000000],[114.437144000000000,38.057424529999999],[114.437223000000000,38.057341059999999],[114.437226999999990,38.057280440000000],[114.437226999999990,38.057056459999998],[114.437404000000000,38.056854899999998],[114.437398000000000,38.056850060000002],[114.437382000000000,38.056630290000001],[114.437582000000010,38.056464400000003],[114.437822999999990,38.056261069999998],[114.438014999999990,38.056099699999997],[114.438247000000000,38.055903989999997],[114.438275000000000,38.055830800000003],[114.438367000000000,38.055683279999997],[114.438608000000000,38.055488290000000],[114.438850000000000,38.055286209999998],[114.439088000000000,38.055087489999998],[114.439312000000000,38.054900160000003],[114.439525000000000,38.054721669999999],[114.439699000000000,38.054576869999998],[114.439601000000000,38.054465520000001],[114.439648000000010,38.054374390000000],[114.439843999999990,38.054170249999999],[114.440032000000000,38.053981250000000],[114.440212000000000,38.053757189999999],[114.440423000000000,38.053491309999998],[114.440641000000000,38.053292110000001],[114.440687999999990,38.053242939999997],[114.440742000000000,38.053164379999998],[114.440757000000000,38.053162579999999],[114.440794999999990,38.053161250000002],[114.441049000000010,38.052908109999997],[114.441253000000000,38.052696800000000],[114.441458999999990,38.052483100000003],[114.441646000000010,38.052290159999998],[114.441886999999990,38.052040759999997],[114.442091000000000,38.051829599999998],[114.442296000000000,38.051617780000001],[114.442447000000000,38.051447340000003],[114.442457000000000,38.051429890000001],[114.442482000000000,38.051404060000003],[114.442656000000000,38.051195829999997],[114.442836000000000,38.051016570000002],[114.442997000000010,38.050847970000000],[114.443225000000000,38.050606870000003],[114.443433000000000,38.050378330000001],[114.443674000000000,38.050113490000001],[114.443903000000010,38.049861749999998],[114.444126000000000,38.049615529999997],[114.444368000000000,38.049349290000002],[114.444565000000000,38.049133110000000],[114.444783000000000,38.048893010000000],[114.444948999999990,38.048875780000003],[114.445100000000000,38.048728130000001],[114.445099000000000,38.048566280000003],[114.445104000000000,38.048414399999999],[114.445108000000000,38.048317580000003],[114.445151999999990,38.047818980000002],[114.445181000000010,38.047698099999998],[114.445185000000000,38.047556940000000],[114.445196999999990,38.047551329999997],[114.445188000000000,38.047545000000000],[114.445226000000010,38.047177290000000],[114.445243000000000,38.046757280000001],[114.445303000000000,38.045955450000001],[114.445308000000000,38.045772100000001],[114.445324000000000,38.045708630000000],[114.445340000000000,38.045583290000003],[114.445363000000000,38.045292730000000],[114.445412000000000,38.044811070000002],[114.445464000000000,38.044225810000000],[114.445465000000000,38.044155510000003],[114.445490000000010,38.044089960000001],[114.445567999999990,38.042383809999997],[114.445625000000010,38.041266440000001],[114.445649000000000,38.041006879999998],[114.445656000000000,38.040962510000000],[114.445667000000000,38.040822849999998],[114.445672000000000,38.040680700000003],[114.445677000000000,38.040547949999997],[114.445682000000010,38.040408880000001],[114.445687000000010,38.040245810000002],[114.445699000000000,38.040134840000000],[114.445696000000000,38.039993060000000],[114.445702000000000,38.039817859999999],[114.445708999999990,38.039637120000002],[114.445714000000000,38.039585729999999],[114.445719999999990,38.039431800000003],[114.445725999999990,38.039254610000000],[114.445732000000010,38.039080079999998],[114.445727000000010,38.039068810000003],[114.445745000000000,38.038871600000000],[114.445742999999990,38.038853719999999],[114.445742999999990,38.038695160000003],[114.445751000000000,38.038618120000002],[114.445758000000000,38.038475320000003],[114.445763000000000,38.038321600000003],[114.445769000000000,38.038160110000000],[114.445780000000000,38.038004510000000],[114.445982000000000,38.038012400000000]
    ]
        //chart配置
        myChart.setOption({
            title: {    //标题
                top: 8,
                left: 'center',
                text: '用户点位显示',
                textStyle: {
                    color: '#333',
                    fontSize: 16,
                },
                subtext: '石家庄市桥西区',
            },
            mapbox: {
                center: [114.446166,38.047284],  //地图中心点经纬度
                zoom: 13,   //地图缩放级别
                //pitch: 50,
                //bearing: -10,
                altitudeScale: 2,
                style: 'mapbox://styles/mapbox/streets-v8',   //地图风格【这里可参考mapbox官网】'mapbox://styles/mapbox/streets-v8',
                postEffect: {
                    enable: true,
                    SSAO: {
                        enable: true,
                        radius: 2,
                        intensity: 1.5
                    }
                },
                light: {
                    main: {
                        intensity: 1,
                        shadow: true,
                        shadowQuality: 'high'
                    },
                    ambient: {
                        intensity: 0.
                    },
                    ambientCubemap: {
                        exposure: 1,
                        diffuseIntensity: 0.5
                    }
                }
            },
            series: [{
                type: 'scatter3D',
                coordinateSystem: 'mapbox',
                symbol: 'pin',    //点符号类型，默认是'circle'
                effect: {
                    show: true,
                    constantSpeed: 3,
                    trailWidth: 1.5,
                    trailLength: 0.2,
                    trailOpacity: 0.7,
                    spotIntensity: 10
                },
                blendMode: 'lighter',
                symbolSize: 14,    //点符号大小
                itemStyle: {
                    color: '#f60062'   //点颜色
                },
                data: []
            }]
        });
    //绑定按钮单击事件【使用jQuery】
    $('#get').click(function () {
        var testdata = [
            [114.430941000000000,38.057633860000003],[114.431135000000000,38.057644109999998],[114.431331000000000,38.057646239999997],[114.431374000000010,38.057647719999999],[114.431639000000000,38.057647240000001],[114.431873000000000,38.057650080000002],[114.432064000000000,38.057652410000003],[114.432299000000000,38.057655269999998],[114.432473000000000,38.057657399999997],[114.432512000000000,38.057655810000000],[114.432702000000010,38.057667889999998],[114.432706000000000,38.057670060000000],[114.432897999999990,38.057665470000003],[114.433075000000000,38.057667039999998],[114.433260000000000,38.057668669999998],[114.433458000000000,38.057670420000001],[114.433652000000000,38.057672130000000],[114.433502000000000,38.057671780000000],[114.433601000000000,38.057666320000003],[114.433797000000000,38.057678299999999],[114.434005000000000,38.057679589999999],[114.434192999999990,38.057680750000003],[114.434285000000000,38.057683460000000],[114.434482000000000,38.057670469999998],[114.434718000000000,38.057671669999998],[114.434921000000000,38.057672689999997],[114.435120000000000,38.057675260000003],[114.435336000000010,38.057801589999997],[114.435543000000000,38.057919380000001],[114.435591000000000,38.057993869999997],[114.435807999999990,38.058107530000001],[114.435982999999990,38.058209349999998],[114.436165000000000,38.058315890000003],[114.436173000000000,38.058324450000001],[114.436362000000000,38.058498239999999],[114.436567999999990,38.058676009999999],[114.436749000000010,38.058811550000001],[114.436832999999990,38.058791370000002],[114.436967999999990,38.058744810000000],[114.437140000000000,38.058448790000000],[114.437185000000000,38.058366399999997],[114.437219000000000,38.058158339999999],[114.437111000000000,38.057920230000001],[114.437065000000000,38.057744499999998],[114.436931000000000,38.057540729999999],[114.437017999999990,38.057475040000000],[114.437144000000000,38.057424529999999],[114.437223000000000,38.057341059999999],[114.437226999999990,38.057280440000000],[114.437226999999990,38.057056459999998],[114.437404000000000,38.056854899999998],[114.437398000000000,38.056850060000002],[114.437382000000000,38.056630290000001],[114.437582000000010,38.056464400000003],[114.437822999999990,38.056261069999998],[114.438014999999990,38.056099699999997],[114.438247000000000,38.055903989999997],[114.438275000000000,38.055830800000003],[114.438367000000000,38.055683279999997],[114.438608000000000,38.055488290000000],[114.438850000000000,38.055286209999998],[114.439088000000000,38.055087489999998],[114.439312000000000,38.054900160000003],[114.439525000000000,38.054721669999999],[114.439699000000000,38.054576869999998],[114.439601000000000,38.054465520000001],[114.439648000000010,38.054374390000000],[114.439843999999990,38.054170249999999],[114.440032000000000,38.053981250000000],[114.440212000000000,38.053757189999999],[114.440423000000000,38.053491309999998],[114.440641000000000,38.053292110000001],[114.440687999999990,38.053242939999997],[114.440742000000000,38.053164379999998],[114.440757000000000,38.053162579999999],[114.440794999999990,38.053161250000002],[114.441049000000010,38.052908109999997],[114.441253000000000,38.052696800000000],[114.441458999999990,38.052483100000003],[114.441646000000010,38.052290159999998],[114.441886999999990,38.052040759999997],[114.442091000000000,38.051829599999998],[114.442296000000000,38.051617780000001],[114.442447000000000,38.051447340000003],[114.442457000000000,38.051429890000001],[114.442482000000000,38.051404060000003],[114.442656000000000,38.051195829999997],[114.442836000000000,38.051016570000002],[114.442997000000010,38.050847970000000],[114.443225000000000,38.050606870000003],[114.443433000000000,38.050378330000001],[114.443674000000000,38.050113490000001],[114.443903000000010,38.049861749999998],[114.444126000000000,38.049615529999997],[114.444368000000000,38.049349290000002],[114.444565000000000,38.049133110000000],[114.444783000000000,38.048893010000000],[114.444948999999990,38.048875780000003],[114.445100000000000,38.048728130000001],[114.445099000000000,38.048566280000003],[114.445104000000000,38.048414399999999],[114.445108000000000,38.048317580000003],[114.445151999999990,38.047818980000002],[114.445181000000010,38.047698099999998],[114.445185000000000,38.047556940000000],[114.445196999999990,38.047551329999997],[114.445188000000000,38.047545000000000],[114.445226000000010,38.047177290000000],[114.445243000000000,38.046757280000001],[114.445303000000000,38.045955450000001],[114.445308000000000,38.045772100000001],[114.445324000000000,38.045708630000000],[114.445340000000000,38.045583290000003],[114.445363000000000,38.045292730000000],[114.445412000000000,38.044811070000002],[114.445464000000000,38.044225810000000],[114.445465000000000,38.044155510000003],[114.445490000000010,38.044089960000001],[114.445567999999990,38.042383809999997],[114.445625000000010,38.041266440000001],[114.445649000000000,38.041006879999998],[114.445656000000000,38.040962510000000],[114.445667000000000,38.040822849999998],[114.445672000000000,38.040680700000003],[114.445677000000000,38.040547949999997],[114.445682000000010,38.040408880000001],[114.445687000000010,38.040245810000002],[114.445699000000000,38.040134840000000],[114.445696000000000,38.039993060000000],[114.445702000000000,38.039817859999999],[114.445708999999990,38.039637120000002],[114.445714000000000,38.039585729999999],[114.445719999999990,38.039431800000003],[114.445725999999990,38.039254610000000],[114.445732000000010,38.039080079999998],[114.445727000000010,38.039068810000003],[114.445745000000000,38.038871600000000],[114.445742999999990,38.038853719999999],[114.445742999999990,38.038695160000003],[114.445751000000000,38.038618120000002],[114.445758000000000,38.038475320000003],[114.445763000000000,38.038321600000003],[114.445769000000000,38.038160110000000],[114.445780000000000,38.038004510000000],[114.445982000000000,38.038012400000000]
        ];
        myChart.setOption({
            background:'#666',
            title: {
                top: 8,
                left: 'center',
                text: '用户点位显示',
                textStyle: {
                    color: '#333',
                    fontSize: 16,
                },
                subtext: '中国科学院地理科学与资源研究所',
            },
            mapbox: {
                center: [114.446166,38.047284],
                zoom: 13,
                //pitch: 50,
                //bearing: -10,
                altitudeScale: 2,
                style: 'mapbox://styles/mapbox/streets-v8',   //'mapbox://styles/mapbox/streets-v8',
                postEffect: {
                    enable: true,
                    SSAO: {
                        enable: true,
                        radius: 2,
                        intensity: 1.5
                    }
                },
                light: {
                    main: {
                        intensity: 1,
                        shadow: true,
                        shadowQuality: 'high'
                    },
                    ambient: {
                        intensity: 0.
                    },
                    ambientCubemap: {
                        exposure: 1,
                        diffuseIntensity: 0.5
                    }
                }
            },
            series: [{
                type: 'scatter3D',
                coordinateSystem: 'mapbox',
                symbol: 'pin',
                effect: {
                    show: true,
                    constantSpeed: 3,
                    trailWidth: 1.5,
                    trailLength: 0.2,
                    trailOpacity: 0.7,
                    spotIntensity: 10
                },
                blendMode: 'lighter',
                symbolSize: 20,
                itemStyle: {
                    color: '#F62157'
                },
                data:testdata    //添加数据
            }]
        });
    })


</script>
</body>
</html>